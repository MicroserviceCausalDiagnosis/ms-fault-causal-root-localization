### 第一步：确认网络连通性（最关键！）

首先，需要确保你们的电脑在同一个局域网内（连接同一个Wi-Fi或路由器），并且能够互相访问。

1. **查找同学B（Linux）的IP地址**：
   - 同学B在他的Linux机器上打开终端，输入命令：`ip addr` 或 `ifconfig`。
   - 找到 `eth0` 或 `wlan0` 等网络接口，记下 `inet` 后面的地址，通常是 `192.168.x.x` 或 `10.x.x.x`。这就是Linux机器的**局域网IP**（假设为 `192.168.1.150`）。
2. **测试连通性**：
   - 同学A在自己的Windows电脑上，按 `Win + R` 键，输入 `cmd` 打开命令提示符。
   - 输入命令：`ping 192.168.1.150`（请替换为同学B的实际IP）。
   - 如果能看到回复（Reply from...），说明网络是通的。如果显示“请求超时”，则需要检查网络设置或防火墙。

------

### 第二步：修改配置

1. **同学A（Windows - 微服务）**：

   - 需要修改两个微服务（`user-service` 和 `order-service`）的启动配置。

   - 将JVM参数中的 `-DSW_AGENT_COLLECTOR_BACKEND_SERVICES=localhost:11800` 改为：

     bash

     ```
     -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.1.150:11800 # 使用同学B的Linux IP
     ```

     

   - **确保** `-javaagent` 的路径指向你**本地Windows电脑**上正确的SkyWalking Agent路径。

   - 修改后的完整配置示例：

     bash

     ```
     -javaagent:D:\skywalking-agent\skywalking-agent.jar
     -DSW_AGENT_NAME=user-service
     -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.1.150:11800
     ```

     

2. **同学B（Linux - SkyWalking）**：

   - **确保Docker Compose配置正确**：检查 `docker-compose.yml` 文件，确保OAP服务的端口映射是正确的，特别是 `11800:11800`。这表示将Linux机器的11800端口映射到了Docker容器的11800端口。
   - **检查防火墙**：Linux系统防火墙可能会阻止外部访问。可能需要临时关闭防火墙或开放11800和8080端口（具体命令取决于Linux发行版，例如对于`ufw`：`sudo ufw allow 11800` 和 `sudo ufw allow 8080`）。

------

### 第三步：启动并测试

1. **启动顺序**：
   - 同学B：在Linux上，确保SkyWalking的Docker容器正在运行。（`docker-compose up -d`）
   - 同学A：在Windows上，依次启动 `user-service` 和 `order-service`。
2. **产生调用流量**：
   - 通过浏览器、Postman或curl命令，调用 `order-service` 的接口（例如 `http://localhost:8082/order/1`，端口以你的实际配置为准）。
   - 这个接口内部应该通过Feign去调用 `user-service` 的接口。只要调用成功，就会产生跨服务的链路数据。
3. **查看监控结果**：
   - **SkyWalking UI地址**：在**任何一台电脑的浏览器**中（包括同学A的Windows电脑），访问 `http://192.168.1.150:8080`（即同学B的Linux IP + 端口8080）。
   - 等待1-2分钟，然后在这个UI界面上查看：
     - **拓扑图 (Topology)**：应该能看到 `user-service` 和 `order-service` 两个节点以及它们之间的调用关系。
     - **追踪 (Trace)**：在追踪页面，应该能看到刚才调用产生的具体链路信息，包含两个服务的处理时间。
     - **性能指标**：可以查看各个服务的响应时间、吞吐量等。

------

### 故障排查清单

如果UI上看不到任何数据，请按以下顺序检查：

1. **Ping是否通？** -> 解决网络问题。
2. **Agent配置IP和端口对吗？** -> 同学A检查JVM参数。
3. **Linux防火墙关闭了吗？端口开放了吗？** -> 同学B检查防火墙设置。
4. **Docker端口映射正确吗？** -> 同学B检查 `docker-compose.yml` 文件。
5. **微服务调用成功了吗？** -> 同学A先确保不加Agent的情况下，Feign调用本身是正常的。
6. **查看日志**：检查微服务启动日志和SkyWalking OAP的日志（`docker-compose logs oap`）是否有错误信息。

### 总结：下一步做什么

当你们成功在SkyWalking UI上看到完整的链路追踪后，第1周的核心目标就**圆满完成了**！

接下来的计划可以是：

- **第2周**：深入使用SkyWalking的功能，比如设置告警规则、查看JVM指标、数据库指标等。
- 或者开始为你们的微服务系统**添加更多的业务功能**，制造更复杂的调用链，从而更好地测试和展示SkyWalking的诊断能力。